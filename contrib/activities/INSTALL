INSTALL
=======

This document gives generic installation directives. If you're running
a Debian/Ubuntu system, see README.Debian for additional details.

Prerequisites
-------------

The 'activities' feature for Gitolite requires the jQuery javascript
library to be accessible via the url "/javascript/jquery/jquery.min.js".

The web part is designed to be embedded into gitweb project index page.

Install method
--------------

If Gitolite is installed using the git repo, it is most convenient to
set up gitweb and the webserver to find the files from the repo instead
of manually copying them around. Utilize symlinks where feasible.

Gitolite configuration
----------------------

Modify the ~/.gitolite.rc configuration file:

 * enable activity logging by adding the 'activities' program into
   the ACCESS_2 and POST_CREATE trigger hashes:

       ACCESS_2 => [
           'activities'
       ],

       POST_CREATE => [
           'activities'
       ],

 * set ACTIVITIES_LOG_FILE option to contain a path to the log file;
   the directory must exist and be writable by the 'gitolite user',
   and readable by the webserver

CGI program configuration
-------------------------

Synchronize the log file path option $log_file in the CGI program's
configuration file /etc/gitolite-activities.conf to match that of
gitolite's ACTIVITIES_LOG_FILE option.

Optionally set other options such as authorization hook; see the
example file gitolite-activities.conf.sample.

Gitweb configuration
--------------------

Configure the webpart.html to be loaded by gitweb.cgi via the $home_text
gitweb configuration variable:

  # html text to include at home page
  $home_text = "/opt/gitolite/contrib/activities/webpart.html";

Configure the stylesheet:

  push @stylesheets, "static/gl-activities/activities.css";

Make sure webserver is able to serve the stylesheet file from the
configured location.

Nginx configuration
-------------------

Set up a location that allows the javascript library to be accessed
via url "/javascript/gl-activities/activities.min.js". Same for the
jQuery library.

Set up a location that allows the CGI program to be run via url
"/cgin-bin/activities.cgi".

Logrotate
---------

In order not to fill up the disk with log information, the sample
file gl-activities.logrotate can be used to set up a logrotate task
for the activities log.
